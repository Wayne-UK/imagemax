(function(f){var c={init:function(h){var i=f.extend({speed:1000,centerVertical:true,centerHorizontal:true,transition:"crossfade",slideType:"horizontal",preCache:false,prevButton:null,nextButton:null,thumbList:null,imageArray:[],easing:"swing",autoPlay:0,preloader:null,fadeFirstLoad:true,beforeLoad:function(){},afterLoad:function(){},afterTransition:function(){}},h);return this.each(function(){var l=f(this);l.css({left:0,top:0,overflow:"hidden"});if(!k){f(this).data("imagemax",{target:l,speed:i.speed,centerVertical:i.centerVertical,centerHorizontal:i.centerHorizontal,imageArray:i.imageArray,imgRatio:1000/500,beforeLoad:i.beforeLoad,afterLoad:i.afterLoad,afterTransition:i.afterTransition,transition:i.transition,preCache:i.preCache,slideType:i.slideType,thumbList:i.thumbList,nextButton:i.nextButton,prevButton:i.prevButton,easing:i.easing,slideDirection:"left",preloader:i.preloader,fadeFirstLoad:i.fadeFirstLoad,curslide:0,startWidth:0,scalePercent:0,autoPlay:i.autoPlay,left:0,top:0});var k=f(this).data("imagemax");f(k.nextButton).click(function(n){l.imagemax("next");n.preventDefault()});f(k.prevButton).click(function(n){l.imagemax("prev");n.preventDefault()});f(k.thumbList).find("li").click(function(o){var n=f(this).index();l.imagemax("goTo",n);o.preventDefault()});if(l.find("img").length>0){for(var j=0;j<l.find("img").length;j++){var m=l.find("img").eq(j).attr("data-src");k.imageArray.push(m)}}l.find("img").remove();if(k.imageArray.length>0){f(this).imagemax("goTo",0)}f(window).bind("resize.imagemax",function(){g(l)})}})},destroy:function(){return this.each(function(){f(window).unbind("resize.imagemax")})},goTo:function(h,j,i){var l=f(this);var k=l.data("imagemax");if(k.slideType==="horizontal"){if(k.curslide>h){k.slideDirection="right";if(h===0&&k.curslide===k.imageArray.length){k.slideDirection="left"}}else{k.slideDirection="left";if(h===k.imageArray.length&&k.curslide===0){k.slideDirection="right"}}}else{if(k.curslide>h){k.slideDirection="down";if(h===0&&k.curslide===k.imageArray.length){k.slideDirection="up"}}else{k.slideDirection="up";if(h===k.imageArray.length&&k.curslide===0){k.slideDirection="down"}}}k.curslide=h;l.imagemax("load",k.imageArray[h],j,i)},next:function(){var i=f(this);var h=i.data("imagemax");var j=h.curslide;j++;if(j>h.imageArray.length-1){j=0}if(h.slideType==="horizontal"){h.slideDirection="left"}else{h.slideDirection="up"}i.imagemax("goTo",j,h.transition,h.slideDirection)},prev:function(){var i=f(this);var h=i.data("imagemax");var j=h.curslide;j--;if(j<0){j=h.imageArray.length-1}if(h.slideType==="horizontal"){h.slideDirection="right"}else{h.slideDirection="down"}i.imagemax("goTo",j,h.transition,h.slideDirection)},load:function(m,j,i){var l=f(this);if(m!==l.find("img").attr("src")){var h;var k=f(this).data("imagemax");clearTimeout(l.data("timeout"));if(i){k.slideDirection=i}if(j){k.transition=j}f(k.preloader).show();l.find("img").addClass("markdelete");k.beforeLoad({index:k.curslide});h=f("<img />").css({position:"absolute",display:"none",margin:0,padding:0,border:"none",maxWidth:"none"}).bind("load",function(r){var v=f(this),t,u;v.css({width:"auto",height:"auto"});t=f(r.target).width();u=f(r.target).height();var o=t/u;k.imgRatio=o;k.startWidth=t;if(k.preCache&&k.fadeFirstLoad){b(l)}if(k.transition==="crossfade"||k.fadeFirstLoad){g(l);v.fadeIn(k.speed,function(){l.find(".markdelete").remove();k.afterTransition({index:k.curslide});l.imagemax("checkAutoPlay");k.fadeFirstLoad=false})}if(k.transition==="instant"){v.show();l.find(".markdelete").remove();k.afterTransition({index:k.curslide});l.imagemax("checkAutoPlay");k.fadeFirstLoad=false}if(k.transition==="slide"&&!k.fadeFirstLoad){g(l,true);var s;var n;var p;var w;var q;if(k.slideDirection==="left"||k.slideDirection==="right"){if(k.centerVertical){a(l)}p=l.parent().width();w=l.parent().height();q=(p-l.find("img").width())*0.5;if(!k.centerVertical){q=0}if(k.slideDirection==="left"){s=q+v.width();n=-(v.width()-q)}if(k.slideDirection==="right"){s=q-v.width();n=(v.width()+q)}v.css({left:s+"px"}).show();v.animate({left:q},k.speed,k.easing,function(){});l.find(".markdelete").animate({left:n},k.speed,k.easing,function(){f(this).remove();k.afterTransition({index:k.curslide});l.imagemax("checkAutoPlay")})}if(k.slideDirection==="up"||k.slideDirection==="down"){if(k.centerHorizontal){e(l)}p=l.parent().width();w=l.parent().height();q=(w-l.find("img").height())*0.5;if(!k.centerHorizontal){q=0}if(k.slideDirection==="up"){s=q+v.height();n=-(v.height()-q)}if(k.slideDirection==="down"){s=q-v.height();n=(v.height()+q)}v.css({top:s+"px"}).show();v.animate({top:q},k.speed,function(){});l.find(".markdelete").animate({top:n},k.speed,function(){f(this).remove();k.afterTransition({index:k.curslide});l.imagemax("checkAutoPlay")})}}k.afterLoad({index:k.curslide});f(k.preloader).fadeOut()}).appendTo(l);h.attr("src",m)}},newImageSet:function(h,i){var k=f(this);var j=k.data("imagemax");j.imageArray=h;f(this).imagemax("goTo",0);if(i){f(this).data("thumbList",i);f(i).find("li").click(function(m){var l=f(this).index();k.imagemax("goTo",l);m.preventDefault()})}},clear:function(){var h=f(this);h.find("img").remove()},checkAutoPlay:function(){var j=f(this);var i=j.data("imagemax");if(i.autoPlay>0&&i.imageArray.length>1){var h=setTimeout(function(){j.imagemax("next")},i.autoPlay);j.data("timeout",h)}}};function b(m){var l=m;var k=l.data("imagemax");var j=[];for(var h=1;h<k.imageArray.length;h++){j[h]=new Image();j[h].src=k.imageArray[h]}}function g(m,n){var l=m;var k=l.data("imagemax");var i=l.parent().width();var j=l.parent().height();var h=i/k.imgRatio;var o=i;if(h>=j){}else{h=j;o=j*k.imgRatio}l.find("img").css({width:o,height:h});if(!n){d(m)}k.scalePercent=o/k.startWidth;k.left=l.find("img").css("left");k.top=l.find("img").css("top")}function d(j){var i=j;var h=i.data("imagemax");if(h.centerHorizontal){e(j)}if(h.centerVertical){a(j)}}function e(j){var i=j;var h=i.parent().width();var k=(h-i.find("img").width())*0.5;i.find("img").css({left:k+"px"})}function a(k){var j=k;var i=j.parent().height();var h=(i-j.find("img").height())*0.5;j.find("img").css({top:h+"px"})}f.fn.imagemax=function(h){if(c[h]){return c[h].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof h==="object"||!h){return c.init.apply(this,arguments)}else{f.error("Method "+h+" does not exist on jQuery.imagemax")}}}})(jQuery);